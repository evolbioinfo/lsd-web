{% extends "lsd/base_generic.html" %}

{% block content %}
<h1>LSD Run Results</h1>

<div class="container">
  <div class="row">
    <div class="col-sm-1 col-title">
      <p>Status</p>
    </div>
    <div class="col-sm-11">
      <p><span class="label label-{{statusshort}}">{{status}}</span></p>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-1 col-title">
      <p>Messages</p>
    </div>
    <div class="col-sm-11">
      <ul class="nav nav-tabs">
	<li class="active"><a href="#output-messages" aria-controls="output" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-console"></span>Output</a></li>
	<li><a href="#error-messages" aria-controls="error" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-console"></span> Error</a></li>
      </ul>
      <div class="tab-content">
	<div role="tabpanel" class="tab-pane active" id="output-messages">
	  <pre class="terminal-messages">
	    {{output}}
	  </pre>
	</div>
	<div role="tabpanel" class="tab-pane" id="error-messages">
	  <pre class="terminal-messages">
	    {{error}}
	  </pre>
	</div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-1 col-title">
      <p>Export</p>
    </div>
    <div class="col-sm-11">
      {% for image in treedateimages %}
      <div>
	<a class="label label-info" href="{% url 'lsd:check_run' %}?jid={{jid}}&pdf={{forloop.counter0}}">pdf</a>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="row">
    <div class="col-sm-1 col-title">
      <p>Tree</p>
    </div>
    <div class="col-sm-11">
      {% if not treeimages and not treedateimages %}
      No results to show
      {% else %}
      {% for image in treedateimages %}
      <div class="resulttree">
	<img src="data:image/png;base64,{{image}}"/>
	<div class="canvaswrapper">
	  <canvas class="tree_canvas" data-url="{% url 'lsd:check_run' %}?jid={{jid}}&json={{forloop.counter0}}"></canvas>
	</div>
	<div class="canvaswrapper">
	  <canvas class="tree_canvas" data-json='{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [], "date_n": 1978.0, "tax": "Thai78", "brlen": 0.00554698, "date_s": "1978/01", "id": 5}, {"suc": [], "date_n": 1984.0, "tax": "Thai84", "brlen": 0.0110443, "date_s": "1984/01", "id": 6}], "date_n": 1971.95, "tax": null, "brlen": 0.0128306, "date_s": "1971/12", "id": 4}, {"suc": [], "date_n": 1978.0, "tax": "SLanka78", "brlen": 0.0183776, "date_s": "1978/01", "id": 7}], "date_n": 1957.94, "tax": null, "brlen": 0.0169442, "date_s": "1957/12", "id": 3}, {"suc": [{"suc": [{"suc": [], "date_n": 1984.0, "tax": "Philip84", "brlen": 0.0215754, "date_s": "1984/01", "id": 10}, {"suc": [], "date_n": 1964.0, "tax": "Philip64", "brlen": 0.00325104, "date_s": "1964/01", "id": 11}], "date_n": 1960.45, "tax": null, "brlen": 0.00698343, "date_s": "1960/06", "id": 9}, {"suc": [], "date_n": 1956.0, "tax": "Philip56", "brlen": 0.00290475, "date_s": "1956/01", "id": 12}], "date_n": 1952.83, "tax": null, "brlen": 0.0122603, "date_s": "1952/10", "id": 8}], "date_n": 1939.45, "tax": null, "brlen": 0.00742674, "date_s": "1939/06", "id": 2}, {"suc": [{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [{"suc": [], "date_n": 1982.0, "tax": "Brazi82", "brlen": 0.000332083, "date_s": "1982/01", "id": 22}, {"suc": [], "date_n": 1983.0, "tax": "ElSal83", "brlen": 0.0012483, "date_s": "1983/01", "id": 23}], "date_n": 1981.64, "tax": null, "brlen": 0.0, "date_s": "1981/08", "id": 21}, {"suc": [], "date_n": 1984.0, "tax": "Mexico84", "brlen": 0.00216452, "date_s": "1984/01", "id": 24}], "date_n": 1981.64, "tax": null, "brlen": 0.0, "date_s": "1981/08", "id": 20}, {"suc": [], "date_n": 1984.0, "tax": "NewCal84", "brlen": 0.00216452, "date_s": "1984/01", "id": 25}], "date_n": 1981.64, "tax": null, "brlen": 0.000477342, "date_s": "1981/08", "id": 19}, {"suc": [], "date_n": 1994.0, "tax": "ElSal94", "brlen": 0.011804, "date_s": "1994/01", "id": 26}], "date_n": 1981.12, "tax": null, "brlen": 0.00186631, "date_s": "1981/02", "id": 18}, {"suc": [], "date_n": 1986.0, "tax": "PRico86", "brlen": 0.0063406, "date_s": "1986/01", "id": 27}], "date_n": 1979.08, "tax": null, "brlen": 0.00129706, "date_s": "1979/01", "id": 17}, {"suc": [], "date_n": 1979.0, "tax": "Tahiti79", "brlen": 0.00122415, "date_s": "1979/01", "id": 28}], "date_n": 1977.66, "tax": null, "brlen": 0.0, "date_s": "1977/08", "id": 16}, {"suc": [], "date_n": 1985.0, "tax": "Tahiti85", "brlen": 0.00672144, "date_s": "1985/01", "id": 29}], "date_n": 1977.66, "tax": null, "brlen": 0.00314277, "date_s": "1977/08", "id": 15}, {"suc": [], "date_n": 1977.0, "tax": "Indon77", "brlen": 0.00253449, "date_s": "1977/01", "id": 30}], "date_n": 1974.23, "tax": null, "brlen": 0.0, "date_s": "1974/03", "id": 14}, {"suc": [], "date_n": 1976.0, "tax": "Indon76", "brlen": 0.00161827, "date_s": "1976/01", "id": 31}], "date_n": 1974.23, "tax": null, "brlen": 0.0392979, "date_s": "1974/03", "id": 13}], "date_n": 1931.34, "tax": null, "brlen": 0.00824219, "date_s": "1931/05", "id": 1}, {"suc": [], "date_n": 1963.0, "tax": "Thai63", "brlen": 0.0372475, "date_s": "1963/01", "id": 32}], "date_n": 1922.35, "tax": null, "brlen": 0.0, "date_s": "1922/05", "id": 0}'></canvas>
	</div>
      </div>
      {% endfor %}
      {% endif %}
    </div>
  </div>
</div>


{% endblock %}
